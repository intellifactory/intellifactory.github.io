<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Serving SPAs | IntelliFactory</title>
  <meta name="description" content="" />
  <link rel="stylesheet" href="/themekit/css/bootstrap-grid.css" />
  <link rel="stylesheet" href="/themekit/css/style.css" />
  <link rel="stylesheet" href="/themekit/css/content-box.css" />
  <link rel="stylesheet" href="/themekit/css/media-box.css" />
  <link rel="stylesheet" href="/themekit/css/social.css" />
  <link rel="stylesheet" href="/themekit/css/contact-form.css" />
  <link rel="stylesheet" href="/assets/skin.css" />
  <link rel="stylesheet" href="/assets/custom.css" />
  <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/highlight.min.js" type="text/javascript" charset="UTF-8"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/languages/fsharp.min.js" type="text/javascript" charset="UTF-8"></script><link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/styles/vs.min.css"></link>
<script src="https://code.jquery.com/jquery-3.1.1.min.js" type="text/javascript" charset="UTF-8"></script>
  <script src="/themekit/scripts/main.js"></script>
</head>
<body>
  <div id="preloader"></div>
  <nav class="menu-classic  light menu-fixed menu-one-page align-right" data-menu-anima="fade-bottom" data-scroll-detect="true">
    <div class="container">
        <div class="menu-brand">
          <a href="#">
            <img class="logo-default" src="/assets/if_logo.png" alt="logo" />
            <img class="logo-retina" src="/assets/if_logo.png" alt="logo" />
            <span>IntelliFactory</span>
          </a>
        </div>
        <i class="menu-btn"></i>
        <div class="menu-cnt">
          <ul>
            <li>
              <a href="/index.html">Consulting</a>
            </li>
            <li class="mega-dropdown mega-tabs mega-open-source">
              <a href="#">Open Source</a>
              <div class="mega-menu">
                <div class="panel">
                  <div class="col-4">
                    <img src="//via.placeholder.com/100x100" />
                    <div><a href="https://websharper.com">WebSharper</a></div>
                    <div class="description">
                      <div>This is an example text under this feel free to change this</div>
                    </div>
                  </div>
                  <div class="col-4">
                    <img src="//via.placeholder.com/100x100" />
                    <div><a href="https://fsbolero.io">Bolero</a></div>
                    <div class="description">
                      <div>This is an example text under this feel free to change this</div>
                    </div>
                  </div>
                  <div class="col-4">
                    <img src="//via.placeholder.com/100x100" />
                    <div><a href="https://github.com/granicz/SiteFi">SiteFi</a></div>
                    <div class="description">
                      <div>This is an example text under this feel free to change this</div>
                    </div>
                  </div>
                </div>
              </div>
            </li>
            <li>
              <a href="/trainings">Trainings</a>
            </li>
            <li>
              <a href="/research">Research</a>
            </li>
            <li class="mega-dropdown mega-tabs">
              <a href="/blogs">Blogs</a>
              <div class="mega-menu">
                <div class="tab-box" data-tab-anima="fade-in">
                  <ul class="tab-nav">
                    <li class="active"><a href="#">F# Advent</a></li>
                    <li><a href="#">Categories</a></li>
                  </ul>
                  <div class="panel active">
                    <div class="col">
                      <ul class="icon-list">
                        <li><a href="/user/granicz/20191226-f-metablogging-introducing-blogengine-for-your-static-markdown-based-f-blog">2019 - F# metablogging: introducing BlogEngine for your static markdown-based F# blog</a></li>
                        <li><a href="/user/granicz/20181210-from-enterprise-to-next-generation-web-celebrating-11-years-with-websharper">2018 - From enterprise to next-generation web: celebrating 11 years with WebSharper</a></li>
                        <li><a href="/user/granicz/20171229-serving-spas">2017 - Serving SPAs</a></li>
                        <li><a href="/user/granicz/20161231-simple-reactive-scenarios-with-websharper">2016 - Simple reactive scenarios with WebSharper</a></li>
                        <li><a href="/user/jankoa/20161207-distributed-web-applications-in-f-with-websharper">2016 - Distributed web applications in F# with WebSharper</a></li>
                        <li><a href="http://localhost:5000/user/granicz/20151226-websharper-a-year-in-review">2015 - WebSharper: a year in review</a></li>
                      </ul>
                    </div>
                  </div>
                  <div class="panel">
                    <div class="col">
                      <ul class="icon-list">
                        <li><a href="elements/containers/accordion.html">Accordion</a></li>
                        <li><a href="elements/containers/album.html">Album</a></li>
                        <li><a href="elements/containers/collapse.html">Collapse</a></li>
                        <li><a href="elements/containers/fixed-area.html">Fixed area</a></li>
                        <li><a href="elements/containers/grid.html">Grid</a></li>
                        <li><a href="elements/containers/lightbox.html">Lightbox</a></li>
                      </ul>
                    </div>
                    <div class="col">
                      <ul class="icon-list">
                        <li><a href="elements/containers/masonry.html">Masonry</a></li>
                        <li><a href="elements/containers/scroll-box.html">Scroll box</a></li>
                        <li><a href="elements/containers/slider.html">Slider</a></li>
                        <li><a href="elements/containers/steps.html">Steps</a></li>
                        <li><a href="elements/containers/tab.html">Tab</a></li>
                        <li><a href="elements/sections/base.html">Section base</a></li>
                      </ul>
                    </div>
                    <div class="col">
                      <ul class="icon-list">
                        <li><a href="elements/sections/image.html">Section image</a></li>
                        <li><a href="elements/sections/slider.html">Section slider</a></li>
                        <li><a href="elements/sections/video.html">Section video</a></li>
                        <li><a href="elements/sections/block.html">Section block</a></li>
                        <li><a href="elements/sections/map.html">Section map</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </li>
            <li>
              <a href="/contact">Contact</a>
            </li>
          </ul>
          <div class="menu-right">
            <div class="menu-custom-area">
              <a class="btn btn-xs btn-circle" href="https://cloudsharper.com">Download CloudSharper</a>
            </div>
          </div>
          <div class="clear"></div>
        </div>
      </div></nav>

  
    
    <header class="header-image ken-burn-center align-center light boxed-page-header" data-parallax="true" data-natural-height="600" data-natural-width="1920" data-bleed="0" data-image-src="/assets/category3.jpg" data-offset="0">
      <div class="container">
        <h1>Serving SPAs</h1>
        <h2>20171229</h2>
        <ol class="breadcrumb">
          <li><a href="/index.html">Home</a></li>
          <li><a href="/blogs">Blogs</a></li>
          <li><a href=""></a></li>
        </ol>
      </div>
    </header>
    <main>
      <section class="section-base boxed-page">
        <div class="container">
          <div class="row">
            <div class="col-lg-9 text-color">
              <div><div ws-preserve=""><p>(This article is part of <a href="https://sergeytihon.com/2017/10/22/f-advent-calendar-in-english-2017/">F# Advent 2017</a> - thanks to <a href="https://sergeytihon.com/">Sergey Tihon</a> for organizing!)</p>
<p>Consider a very typical scenario: you have a web application that serves an SPA. The SPA itself has several &quot;pages,&quot; each with its own client-side routed URLs (think of Gmail, for instance.) Then people copy some of these URLs from their &quot;session&quot; and send them to others, who in turn expect to find exactly what the sender saw. Except with most SPAs, the server-side knows nothing about the URLs generated on the client and usually throws you back to some initial SPA page. Implementing this properly requires you to share all or a subset of the URLs both on the server and on the client. With WebSharper, this is easy.</p>
<h3 id="routing">Routing</h3>
<p>One fundamental difference between WebSharper and other server-side capable F# frameworks such as Giraffe or Suave, is that WebSharper supports <strong>safe URLs</strong>, i.e. URLs computed from the serving context (as opposed to encoding them as ordinary strings) that are guaranteed to be correct.</p>
<p>Consider the following simple app in Giraffe:</p>
<pre><code class="language-fsharp">open Giraffe

let webApp =
    choose [
        route &quot;/ping&quot;     &gt;=&gt; text &quot;pong&quot;
        routef &quot;/echo/%s&quot; (fun s -&gt; text s)
        route &quot;/&quot;         &gt;=&gt; htmlFile &quot;/pages/index.html&quot; ]

type Startup() =
    member __.Configure (app : IApplicationBuilder)
                        (env : IHostingEnvironment)
                        (loggerFactory : ILoggerFactory) =

        app.UseGiraffe webApp
</code></pre>
<p>The same app would look like this in WebSharper:</p>
<pre><code class="language-fsharp">open WebSharper
open WebSharper.Sitelets

type EndPoint =
    | [&lt;EndPoint &quot;/&quot;&gt;]     Home
    | [&lt;EndPoint &quot;/ping&quot;&gt;] Ping
    | [&lt;EndPoint &quot;/echo&quot;&gt;] Echo of string

[&lt;Website&gt;]
let Main =
    Application.MultiPage (fun (ctx: Context&lt;EndPoint&gt;) -&gt; function
        | EndPoint.Home   -&gt; Content.File &quot;pages/index.html&quot;
        | EndPoint.Ping   -&gt; Content.Text &quot;pong&quot;
        | EndPoint.Echo s -&gt; Content.Text s
    )
</code></pre>
<p>With this declaration, <strong>you can obtain the correct URL to any page</strong> (or &quot;endpoint&quot;, and fully formed with any of its page arguments) from the serving context, which itself is parameterized over the (typically) discriminated union type that represents all entry points to the application.</p>
<p>For instance, you can get the URL to a particular instantiation of the &quot;echo&quot; page as follows:</p>
<pre><code class="language-fsharp">   ctx.Link (EndPoint.Echo &quot;hello&quot;)
</code></pre>
<p>Now, clearly, there is a lot you would/could want to do with URLs/endpoints. Making them accessible via POST instead of GET, adding authentication, passing or posting structured values, etc. (You can find the relevant <a href="https://developers.websharper.com/docs/v4.1/fs/sitelets">WebSharper documentation here</a>.) You can do all of these in WebSharper and Giraffe, equally. The main difference, however, remains that Giraffe (or Suave for that matter) builds these up from smaller functions/combinators, whereas WebSharper enables you to do these declaratively (attached to the type that represents your endpoints, i.e. <code>EndPoint</code> above) and generates a similar pipeline of combinators under the cover (you can also construct routers manually, similar to Giraffe). This gains not only safe URLs, but also a number of other benefits.</p>
<p>One such benefit is exactly what we need: sharing the URL space between the server and the client side. In pure SPAs, this means sharing the full endpoint type, but more often than that you would want your client-side URL space as a proper subset of the full endpoint set.</p>
<h3 id="a-barebones-approach">A barebones approach</h3>
<p><a href="https://i.imgur.com/Dk73D2j.png"><img src="https://i.imgur.com/Dk73D2jm.png" alt="" /></a>
<a href="https://i.imgur.com/K2PnK5I.png"><img src="https://i.imgur.com/K2PnK5Im.png" alt="" /></a>
<a href="https://i.imgur.com/XYPtC8R.png"><img src="https://i.imgur.com/XYPtC8Rm.png" alt="" /></a></p>
<p>(In the screeshots above, the city pages are routed on the client and no server roundtrip (and thus no page refresh) is taking place. The home page is re-requested from the server every time you visit it, you can add other server-based pages easily. However, you can refresh each page, including the two kinds of SPA pages, and you will correctly see the same content.)</p>
<p>Say you want an app (shown above, grab it via a gist <a href="https://gist.github.com/granicz/eeaf2140a3f1fbccc9ebb4af9deadaa1">here</a>) to report things on various cities using the following URLs:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">URL</th>
<th style="text-align: left;">.....</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>/</code></td>
<td style="text-align: left;">The root/home page</td>
</tr>
<tr>
<td style="text-align: left;"><code>/spa/cities</code></td>
<td style="text-align: left;">The page listing our cities, the main SPA</td>
</tr>
<tr>
<td style="text-align: left;"><code>/spa/cities/XYZ</code></td>
<td style="text-align: left;">A page for showing info for a given city</td>
</tr>
</tbody>
</table>
<p>You can define your endpoint type as follows:</p>
<pre><code class="language-fsharp">type SPA =
    | [&lt;EndPoint &quot;/cities&quot;&gt;] Cities
    | [&lt;EndPoint &quot;/cities&quot;&gt;] City of string

type EndPoint =
    | [&lt;EndPoint &quot;/&quot;&gt;] Home
    | [&lt;EndPoint &quot;/spa&quot;&gt;] SPA of SPA
</code></pre>
<p>The intention is that <strong><code>/spa/*</code> URLs will be routed and their content generated on the client</strong> (i.e. without a server roundtrip). You can do this easily by combining <code>Router.Infer&lt;...&gt;</code> (to create a router for an endpoint type automatically), <code>Router.Slice</code> (to split the part of it you want to make available on the client), and <code>Router.Install</code> (to create a client-side router to listen to URL changes in the browser) - alternatively, you can also use <code>Router.InstallHash</code> for a hash-based version:</p>
<pre><code class="language-fsharp">    let router = Router.Infer&lt;EndPoint&gt;()
    let location =
        router
        |&gt; Router.Slice (function | SPA spa -&gt; Some spa | _ -&gt; None) EndPoint.SPA
        |&gt; Router.Install SPA.Cities
</code></pre>
<p>The type of <code>location</code> is <code>Var&lt;SPA&gt;</code>, a reactive variable that you can observe the value of (to fetch the current SPA page) or set directly (to route to that page). Note the sharp contrast between this type-safe approach and other ad-hoc methods that perform these via ordinary strings.</p>
<pre><code class="language-fsharp">open WebSharper.UI.Notation

location := SPA.Cities
</code></pre>
<p>You can now reactively construct the individual SPA pages based on the value of <code>location</code> and a simple city store:</p>
<pre><code class="language-fsharp">[&lt;JavaScript&gt;]
module Client =
    open WebSharper.UI.Client
    
    let store =
        [
            &quot;Budapest&quot;, &quot;awesome&quot;
            &quot;Paris&quot;, &quot;famous&quot;
            &quot;San Francisco&quot;, &quot;expensive&quot;
            &quot;London&quot;, &quot;cosmopolitan&quot;
            &quot;Singapore&quot;, &quot;crowded&quot;
        ]
        
    let Main () =
        ...
        location.View.Doc(function
            | SPA.Cities -&gt;
                Doc.Concat [
                    ul [] (
                        store |&gt; List.map (fun (city, _) -&gt;
                            a [attr.href &lt;| router.Link (EndPoint.SPA (SPA.City city))] [
                                li [] [text city]
                            ] :&gt; Doc)
                    )
                ]
            | SPA.City city -&gt;
                let message =
                    match List.tryFind (fun (cty, _) -&gt; city=cty) store with
                    | None -&gt;
                        p [] [text &quot;I don't know your city :(&quot;]
                    | Some (_, adjective) -&gt;
                        p [] [text &lt;| &quot;Your city is &quot; + adjective + &quot;!&quot;]
                Doc.Concat [
                    h1 [] [text city]
                    message
                    p [] [
                        text &quot;Click &quot;
                        a [attr.href (router.Link (EndPoint.SPA SPA.Cities))] [text &quot;here&quot;]
                        text &quot; to go back.&quot;
                    ]
                ]
        )
</code></pre>
<p>All that remains is serving this SPA and an empty home page from the server-side:</p>
<pre><code class="language-fsharp">module Site =
    let HomePage (ctx: Context&lt;EndPoint&gt;) =
        Content.Page(
            Title = &quot;Home&quot;,
            Body = [
                p [] [
                    text &quot;There is nothing here, go to the &quot;
                    a [attr.href &lt;| ctx.Link (EndPoint.SPA SPA.Cities)] [text &quot;Cities page&quot;]
                ]
            ]
        )

    let CitiesPage ctx =
        Content.Page(
            Title = &quot;Cities&quot;,
            Body = [
                div [] [client &lt;@ Client.Main () @&gt; ]
            ]

        )

    [&lt;Website&gt;]
    let Main =
        Application.MultiPage (fun ctx endpoint -&gt;
            match endpoint with
            | EndPoint.Home -&gt;
                HomePage ctx
            | EndPoint.SPA SPA.Cities
            | EndPoint.SPA (SPA.City _) -&gt;
                CitiesPage ctx
        )
</code></pre>
<p>This app, which can be hosted in any ASP.NET- or OWIN-compatible container, including Suave, or self-hosted) guarantees that we can serve any one of the three types of URLs we specified earlier, and it correctly routes the SPA (<code>/spa/*</code>) accordingly as well. (Note: you can also accomplish this also by combining Suave or Giraffe for the server-side and Fable.Elmish on the client-side, but <strong>you won't get any integration or safe URL representation between the two tiers</strong>.)</p>
<h3 id="adding-templating">Adding templating</h3>
<p><a href="https://i.imgur.com/uBAdweU.png"><img src="https://i.imgur.com/uBAdweUm.png" alt="" /></a>
<a href="https://i.imgur.com/mOuYbuL.png"><img src="https://i.imgur.com/mOuYbuLm.png" alt="" /></a>
<a href="https://i.imgur.com/eKE3u0D.png"><img src="https://i.imgur.com/eKE3u0Dm.png" alt="" /></a></p>
<p>Another very common need is <strong>to be able to modify an application, or at least its appearance, at runtime</strong>. For instance, you may want to touch up some of the markup you generate in your application, change its structure, add new attributes here and there, etc. On the server-side, both Suave and Giraffe provide a way to serve templated content via DotLiquid. They can also detect modifications to these templates and reload them before serving new content based on them. However, support for templating on the client-side from an F# perspective is severely limited, and you typically fall back to using Mustache, Handlebars, Underscore, or whatever JavaScript-based templating engine you prefer, via inlined JS code, or no support at all.</p>
<p>Not with WebSharper. Although you can easily adapt DotLiquid and other server-side templating engines to plug directly into WebSharper content, WebSharper UI also comes with its own templating engine that you can read about <a href="https://developers.websharper.com/docs/v4.1/fs/ui">here</a>. The nice thing about this templating engine is that <strong>it works both on the server and on the client, unlike anything else</strong>.</p>
<p>What we want is to remove as much of the inlined HTML from our F# code as possible and replace it with HTML templates that we can then modify external to the application. And don't even think about trying to push CSS and other silliness into your F# code, as it will limit you severely. For this example, I cooked up a straightforward template (<code>Main.html</code>) that uses Bulma, which you can find in <a href="https://gist.github.com/granicz/9cd31128496fda6c0f6c228cce55d246">this gist</a>.</p>
<p>For instance, consider the following fragment, which defines a <code>Banner</code> placeholder and two inner &quot;sub&quot; templates <code>HomeBanner</code> and <code>CitiesBanner</code>, that can be readily plugged into <code>Banner</code>.</p>
<pre><code class="language-xml">  &lt;div ws-replace=&quot;Banner&quot;&gt;
    &lt;section class=&quot;hero is-info&quot; ws-template=&quot;HomeBanner&quot;&gt;
      &lt;div class=&quot;hero-body&quot;&gt;
        &lt;p class=&quot;title&quot;&gt;Home&lt;/p&gt;
      &lt;/div&gt;
    &lt;/section&gt;
    &lt;section class=&quot;hero is-info&quot; ws-template=&quot;CitiesBanner&quot;&gt;
      &lt;div class=&quot;hero-body&quot;&gt;
        &lt;p class=&quot;title&quot;&gt;Cities&lt;/p&gt;
        &lt;p class=&quot;subtitle&quot;&gt;Pick your favorite city.&lt;/p&gt;
      &lt;/div&gt;
    &lt;/section&gt;
  &lt;/div&gt;
</code></pre>
<p>Or consider the nested templates for the SPA content:</p>
<pre><code class="language-xml">      &lt;div class=&quot;content&quot;&gt;
        &lt;div ws-replace=&quot;Body&quot;&gt;
          &lt;ul ws-template=&quot;CityLinks&quot; ws-hole=&quot;Links&quot;&gt;
            &lt;li ws-template=&quot;CityLink&quot;&gt;&lt;a href=&quot;${Link}&quot;&gt;${Title}&lt;/a&gt;&lt;/li&gt;
          &lt;/ul&gt;
          &lt;div ws-template=&quot;CityPage&quot;&gt;
            &lt;h1&gt;${Name}&lt;/h1&gt;
            &lt;div ws-replace=&quot;Message&quot;&gt;
              &lt;div ws-template=&quot;NotFound&quot;&gt;
                &lt;p&gt;I don't know your city :(&lt;/p&gt;
              &lt;/div&gt;
              &lt;div ws-template=&quot;Found&quot;&gt;
                &lt;p&gt;Your city is &lt;b&gt;${Kind}&lt;/b&gt;&lt;/p&gt;
              &lt;/div&gt;
            &lt;/div&gt;
            &lt;p&gt;Click &lt;a href=&quot;${BackLink}&quot;&gt;here&lt;/a&gt; to return.&lt;/p&gt;
          &lt;/div&gt;
        &lt;/div&gt;
</code></pre>
<p>All you have to do now is to bring the template and all the good stuff in it into scope:</p>
<pre><code class="language-fsharp">    open WebSharper.UI.Templating

    type MainTemplate = Template&lt;&quot;Main.html&quot;, ClientLoad.FromDocument, ServerLoad.WhenChanged&gt;
</code></pre>
<p>This says &quot;go through <code>Main.html</code> and find all placeholders, templates and nested templates in it, and make them available under <code>MainTemplate</code>, and if the file changes refresh it automatically when used from the server, and reload it automatically from the main document on the client (since we are in an SPA that is based on the very same file.)&quot; <strong>This one line performs a LOT if you think about it, and all that complexity is taken care of and hidden from you, so you can concentrate on your code and logic instead</strong>.</p>
<p>Contrast what happens inside <code>Client.Main()</code> now with templating:</p>
<pre><code class="language-fsharp">[&lt;JavaScript&gt;]
module Client =
    ...
    let Main () =
        ...
        location.View.Doc(function
            | SPA.Cities -&gt;
                MainTemplate.CityLinks()
                    .Links(
                        store |&gt; List.map (fun (city, _) -&gt;
                            MainTemplate.CityLink()
                                .Link(router.Link (EndPoint.SPA (SPA.City city)))
                                .Title(city)
                                .Doc()
                        )
                    )
                    .Doc()
            | SPA.City city -&gt;
                let message =
                    match List.tryFind (fst &gt;&gt; (=) city) store with
                    | None -&gt;
                        MainTemplate.NotFound().Doc()
                    | Some (_, adjective) -&gt;
                        MainTemplate.Found().Kind(adjective).Doc()
                MainTemplate.CityPage()
                    .Name(city)
                    .Message(message)
                    .BackLink(router.Link (EndPoint.SPA SPA.Cities))
                    .Doc()
        )
</code></pre>
<p>Not a single in-code HTML combinator in sight - so we are good to go. The final F# code is 110 LOC, and it serves our SPA and all of its links when visited directly as well, all dressed up in a nice Bulma-based master template. Hurray!</p>
<h3 id="summing-up">Summing up</h3>
<p>In this article, we looked at two fundamental problems you are likely to encounter in any serious web development: serving SPAs with their URLs understood both on the server and the client, and externalizing your entire presentation layer so it can be modified at runtime.</p>
<p>If you want to try the gists, start with a Client-Server Application template after installing WebSharper into your Visual Studio (you can grab the VSIX installer from the <a href="https://websharper.com">main website</a>, or download that template from the developer site (from the Apps menu on the top.)</p>
<p>Guess what? You can do all this in C# as well, but I'll save that for another article! So stay tuned and don't hesitate to ask about WebSharper on the <a href="https://forums.websharper.com">forums</a>, and be sure to check out the <a href="https://developers.websharper.com">documentation</a> - both 100% WebSharper SPAs in case you wondered 😉</p>
<h4 id="forums">Forums</h4>
<p><a href="https://forums.websharper.com"><img src="https://i.imgur.com/2DkBX2ol.png" alt="" /></a></p>
<h4 id="documentation">Documentation</h4>
<p><a href="https://developers.websharper.com"><img src="https://i.imgur.com/ANg1Fual.png" alt="" /></a></p>
<h4 id="quick-links">Quick links:</h4>
<ul>
<li>documentation on <a href="http://developers.websharper.com/docs/v4.1/fs/sitelets">routing requests</a></li>
<li>documentation on <a href="http://developers.websharper.com/docs/v4.1/fs/ui">WebSharper UI and templating</a></li>
<li>barebones example in <a href="https://gist.github.com/granicz/eeaf2140a3f1fbccc9ebb4af9deadaa1">this gist</a>, and</li>
<li>the templated version in <a href="https://gist.github.com/granicz/9cd31128496fda6c0f6c228cce55d246">this gist</a></li>
</ul>
<p>Happy holidays and happy coding!</p>
</div></div>
              <hr class="space" />
              <div class="icon-links icon-links-button full-width icon-social social-colors">
                <a data-social="share-facebook" class="facebook"><i class="fab fa-facebook"></i></a>
                <a data-social="share-twitter" class="twitter"><i class="fab fa-twitter"></i></a>
                <a data-social="share-linkedin" class="linkedin"><i class="fab fa-linkedin"></i></a>
                <a data-social="share-pinterest" class="pinterest"><i class="fab fa-pinterest"></i></a>
              </div>
              <hr />
              <div class="cnt-box cnt-box-side box-small">
                <a href="#" class="img-box"><img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub source" /></a>
                <div class="caption">
                  <h2>Found a typo?</h2>
                  <p>
                    This blog post is hosted on GitHub <a href="https://github.com/IntelliFactory/blogs/tree/master/user/granicz/20171229-serving-spas.md">here</a>. Feel free to file a ticket or send a PR.
                  </p>
                </div>
              </div>
              <hr />
              <h2>Other articles you might be interested in</h2>
              <hr class="space-sm" />
              <div class="grid-list" data-columns="3" data-columns-sm="1">
                <div class="grid-box">
                  <div class="grid-item">
                    <div href="#" class="cnt-box cnt-box-top-icon boxed doc-boxed align-left">
                      <div class="caption">
                        <h2>Jessica Adams Exibition In New York With After Show</h2>
                        <div class="extra-field">Technology</div>
                        <p>
                          October 25, 2019
                        </p>
                      </div>
                    </div>
                  </div>
                  <div class="grid-item">
                    <div href="#" class="cnt-box cnt-box-top-icon boxed doc-boxed align-left">
                      <div class="caption">
                        <h2>How to change your business and make money</h2>
                        <div class="extra-field">Business</div>
                        <p>
                          October 24, 2019
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-lg-3 widget">
              
              <div>
                <h3>Tagged as</h3>
                <hr class="space-xs" />
                <div class="tabs"><div>
                    <a href="/category/fsadvent">
                      fsadvent
                    </a>
                  </div><div>
                    <a href="/category/fsharp">
                      fsharp
                    </a>
                  </div><div>
                    <a href="/category/routing">
                      routing
                    </a>
                  </div><div>
                    <a href="/category/templating">
                      templating
                    </a>
                  </div><div>
                    <a href="/category/ui">
                      ui
                    </a>
                  </div><div>
                    <a href="/category/websharper">
                      websharper
                    </a>
                  </div></div>
                <h3>Latest posts</h3>
                <hr class="space-sm" />
                <div class="menu-inner menu-inner-vertical menu-inner-image">
                    <ul>
                      <li>
                        <a href="/user/granicz/20201231-variations-for-a-websharper-shopping-cart">
                          <img src="/assets/category3-thumb.jpg" alt="Variations for a WebSharper shopping cart" />
                          Variations for a WebSharper shopping cart
                          <span>12/31/2020</span>
                        </a>
                      </li><li>
                        <a href="/user/denuziere/20200523-bolero-0-13-released">
                          <img src="/assets/category5-thumb.jpg" alt="Bolero 0.13 released" />
                          Bolero 0.13 released
                          <span>05/23/2020</span>
                        </a>
                      </li><li>
                        <a href="/user/denuziere/20200323-bolero-0-12-released">
                          <img src="/assets/category5-thumb.jpg" alt="Bolero 0.12 released" />
                          Bolero 0.12 released
                          <span>03/23/2020</span>
                        </a>
                      </li><li>
                        <a href="/user/granicz/20200116-converting-a-websharper-html-app-to-a-client-server-one">
                          <img src="/assets/category4-thumb.jpg" alt="Converting a WebSharper HTML app to a client-server one" />
                          Converting a WebSharper HTML app to a client-server one
                          <span>01/16/2020</span>
                        </a>
                      </li><li>
                        <a href="/post/20200101-writing-instructions.html">
                          <img src="/assets/category4-thumb.jpg" alt="Writing instructions" />
                          Writing instructions
                          <span>01/01/2020</span>
                        </a>
                      </li><li>
                        <a href="/user/granicz/20191226-f-metablogging-introducing-blogengine-for-your-static-markdown-based-f-blog">
                          <img src="/assets/category4-thumb.jpg" alt="F# metablogging: introducing BlogEngine for your static markdown-based F# blog" />
                          F# metablogging: introducing BlogEngine for your static markdown-based F# blog
                          <span>12/26/2019</span>
                        </a>
                      </li><li>
                        <a href="/user/denuziere/20190924-bolero-0-9-released">
                          <img src="/assets/category5-thumb.jpg" alt="Bolero 0.9 released" />
                          Bolero 0.9 released
                          <span>09/24/2019</span>
                        </a>
                      </li><li>
                        <a href="/user/granicz/20190905-your-first-bolero-project-not-compiling-try-this">
                          <img src="/assets/category1-thumb.jpg" alt="Your first Bolero project not compiling? Try this!" />
                          Your first Bolero project not compiling? Try this!
                          <span>09/05/2019</span>
                        </a>
                      </li><li>
                        <a href="/user/denuziere/20190805-bolero-0-7-released">
                          <img src="/assets/category5-thumb.jpg" alt="Bolero 0.7 released" />
                          Bolero 0.7 released
                          <span>08/05/2019</span>
                        </a>
                      </li><li>
                        <a href="/user/denuziere/20190530-bolero-0-5-released-for-blazor-3-0-preview">
                          <img src="/assets/category5-thumb.jpg" alt="Bolero 0.5 released for Blazor 3.0-preview" />
                          Bolero 0.5 released for Blazor 3.0-preview
                          <span>05/30/2019</span>
                        </a>
                      </li>
                      
                    </ul>
                  </div>
                <hr class="space-sm" />
                <h3>Twitter</h3>
                <hr class="space-sm" />
                <div class="social-feed social-feed-tw social-slider" data-social-id="twitter" data-options="count:8,arrows:true,nav:true,controls:out,type:carousel,perView:1"></div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
  
  <i class="scroll-top-btn scroll-top show"></i>
  <footer class="footer light">
      
          <div class="container">
              <div class="row">
                  <div class="col-lg-2">
                      <h4>Company</h4>
                      <div class="menu-inner menu-inner-vertical">
                          <ul>
                              <li>
                                  <a href="/consulting">Consulting</a>
                              </li>
                              <li>
                                  <a href="/trainings">Trainings</a>
                              </li>
                              <li>
                                  <a href="/research">Research</a>
                              </li>
                              <li>
                                  <a href="/jobs">Jobs</a>
                              </li>
                              <li>
                                  <a href="/contact">Contact</a>
                              </li>
                          </ul>
                      </div>
                  </div>
                  <div class="col-lg-2">
                      <h4>Blogs</h4>
                      <div class="menu-inner menu-inner-vertical">
                          <ul>
                              <li>
                                  <a href="/blogs">Latest</a>
                              </li>
                              <li>
                                  <a href="/category/fsharp">F#</a>
                              </li>
                              <li>
                                  <a href="/category/websharper">WebSharper</a>
                              </li>
                              <li>
                                  <a href="/category/bolero">Bolero</a>
                              </li>
                              <li>
                                  <a href="/category/cloudsharper">CloudSharper</a>
                              </li>
                          </ul>
                      </div>
                  </div>
                  <div class="col-lg-4">
                      <h4>Legal</h4>
                      <div class="menu-inner menu-inner-vertical">
                          <ul>
                              <li>
                                  <a href="/terms-of-use">Terms of use</a>
                              </li>
                              <li>
                                  <a href="/privacy-policy">Privacy Policy</a>
                              </li>
                              <li>
                                  <a href="/cookie-policy">Cookie Policy</a>
                              </li>
                              <li>
                                  <a href="/QualityAndIntegratedSecurityPolicy.pdf">Integrated Quality and Information Security Policy</a>
                              </li>
                          </ul>
                      </div>
                  </div>
                  <div class="col-lg-4">
                      <h4>Newsletter signup</h4>
                      <p>We will not spam you or give your details to anyone.</p>
                      <form class="newsletter-form form-box form-ajax" method="post" data-email="example@domain.com">
                          <input style="width:200px" id="nemail" name="nemail" placeholder="Your email" type="email" class="input-text" required="" />
                          <button id="signUp" class="btn btn-sm btn-circle" type="submit">
                              <span>Sign Up</span>
                              <i class="fas fa-spinner fa-spin"></i>
                          </button>
                          <div class="success-box">
                              <div class="alert alert-success">Congratulations. You have signed up successfully!</div>
                          </div>
                          <div class="error-box">
                              <div class="alert alert-warning">Error, please retry. You were not signed up for the newsletter.</div>
                          </div>
                      </form>
                  </div>
              </div>
          </div>
          <div class="footer-bar">
              <div class="container">
                  <span>Made with</span>
                  <img width="24" height="20" style="vertical-align:top;" alt="Love" src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/42/Love_Heart_SVG.svg/32px-Love_Heart_SVG.svg.png" />
                  <span>in 100% F# with WebSharper. Copyright © IntelliFactory 2004-2020. Site design created by Schiocco Team.</span>
                  <span class="icon-links icon-social icon-links-grid social-colors">
                    <a class="facebook" href="https://www.facebook.com/intellifactory"><i class="fab fa-facebook"></i></a>
                    <a class="twitter" href="https://twitter.com/intellifactory"><i class="fab fa-twitter"></i></a>
                    <a class="linkedin" href="https://www.linkedin.com/company/intellifactory"><i class="fab fa-linkedin"></i></a>
                    <a class="youtube" href="https://www.youtube.com/results?search_query=intellifactory"><i class="fab fa-youtube"></i></a>
                    <a class="vimeo" href="https://vimeo.com/user15828007"><i class="fab fa-vimeo"></i></a>
                  </span>
              </div>
          </div>
      
      <div></div>
      <div id="cookie-banner"><p>This site uses cookies and other tracking technologies to assist with navigation and your ability to provide feedback, and analyse your use of our products and services.</p><a target="_blank" href="/cookie-policy">Read our Cookie Policy</a><div><button onclick="wscookies.accept()">Accept cookies</button><button onclick="wscookies.refuse()">Refuse cookies</button></div></div><script>
    var wscookies = {
        accepted: document.cookie.replace(/(?:(?:^|.*;\s*)cookie_accept\s*\=\s*([^;]*).*$)|^.*$/, "$1"),
        accept: function () {
        document.cookie = 'cookie_accept=true;max-age=31536000';
        this.set_banner('none');
        this.after_accept();
        },
        after_accept: function () { },
        refuse: function () {
        document.cookie = 'cookie_accept=false;max-age=31536000';
        this.set_banner('none');
        },
        set_banner: function (style) {
        document.getElementById('cookie-banner').style.display = style;
        }
    };
    switch (wscookies.accepted) {
        case '':
        wscookies.set_banner('flex');
        break;
        case 'true':
        wscookies.accept();
        break;
        default:
        wscookies.refuse();
    }
</script>
      <link rel="stylesheet" href="/themekit/media/icons/iconsmind/line-icons.min.css" />
      <link async="" rel="stylesheet" href="/themekit/media/icons/fontawesome/icons.css" />
      <script src="/themekit/scripts/parallax.min.js"></script>
      <script src="/themekit/scripts/imagesloaded.min.js"></script>
      <script src="/themekit/scripts/pagination.min.js"></script>
      <script src="/themekit/scripts/social.min.js"></script>
      <script src="/themekit/scripts/tab-accordion.js"></script>
      <script src="/media/custom.js"></script>
      <script src="/js/Client.js"></script>
      <meta id='websharper-data' name='websharper-data' content='{"$TYPES":[],"$DATA":{"$V":{}}}' />
<script src="../../Scripts/WebSharper.Core.JavaScript/Runtime.js" type="text/javascript" charset="UTF-8"></script><script type="text/javascript">
if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '../../Scripts/';
  IntelliFactory.Runtime.Start();
}
</script>

      <script src="//unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
      <script src="//unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
      <script>
          $(document).ready(function () {
              var $container = $('.masonry');
              $container.imagesLoaded(function () {
                  $container.masonry({
                      itemSelector: '.masonry-item',
                      percentPosition: true,
                      horizontalOrder: true
                  });
              });
          });
      </script>
  </footer>
</body>
</html>