<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Rapid prototyping of DSLs in F# - Part III | IntelliFactory</title>
  <meta name="description" content="" />
  <link rel="stylesheet" href="/themekit/css/bootstrap-grid.css" />
  <link rel="stylesheet" href="/themekit/css/style.css" />
  <link rel="stylesheet" href="/themekit/css/content-box.css" />
  <link rel="stylesheet" href="/themekit/css/media-box.css" />
  <link rel="stylesheet" href="/themekit/css/social.css" />
  <link rel="stylesheet" href="/themekit/css/contact-form.css" />
  <link rel="stylesheet" href="/assets/skin.css" />
  <link rel="stylesheet" href="/assets/custom.css" />
  <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/highlight.min.js" type="text/javascript" charset="UTF-8"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/languages/fsharp.min.js" type="text/javascript" charset="UTF-8"></script><link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/styles/vs.min.css"></link>
<script src="https://code.jquery.com/jquery-3.1.1.min.js" type="text/javascript" charset="UTF-8"></script>
  <script src="/themekit/scripts/main.js"></script>
</head>
<body>
  <div id="preloader"></div>
  <nav class="menu-classic  light menu-fixed menu-one-page align-right" data-menu-anima="fade-bottom" data-scroll-detect="true">
    <div class="container">
        <div class="menu-brand">
          <a href="#">
            <img class="logo-default" src="/assets/if_logo.png" alt="logo" />
            <img class="logo-retina" src="/assets/if_logo.png" alt="logo" />
            <span>IntelliFactory</span>
          </a>
        </div>
        <i class="menu-btn"></i>
        <div class="menu-cnt">
          <ul>
            <li>
              <a href="index.html">Consulting</a>
            </li>
            <li class="mega-dropdown mega-tabs mega-open-source">
              <a href="#">Open Source</a>
              <div class="mega-menu">
                <div class="panel">
                  <div class="col-4">
                    <img src="//via.placeholder.com/100x100" />
                    <div><a href="https://websharper.com">WebSharper</a></div>
                    <div class="description">
                      <div>This is an example text under this feel free to change this</div>
                    </div>
                  </div>
                  <div class="col-4">
                    <img src="//via.placeholder.com/100x100" />
                    <div><a href="https://fsbolero.io">Bolero</a></div>
                    <div class="description">
                      <div>This is an example text under this feel free to change this</div>
                    </div>
                  </div>
                  <div class="col-4">
                    <img src="//via.placeholder.com/100x100" />
                    <div><a href="https://github.com/granicz/SiteFi">SiteFi</a></div>
                    <div class="description">
                      <div>This is an example text under this feel free to change this</div>
                    </div>
                  </div>
                </div>
              </div>
            </li>
            <li>
              <a href="/trainings">Trainings</a>
            </li>
            <li>
              <a href="/research">Research</a>
            </li>
            <li class="mega-dropdown mega-tabs">
              <a href="/blogs">Blogs</a>
              <div class="mega-menu">
                <div class="tab-box" data-tab-anima="fade-in">
                  <ul class="tab-nav">
                    <li class="active"><a href="#">F# Advent</a></li>
                    <li><a href="#">Categories</a></li>
                  </ul>
                  <div class="panel active">
                    <div class="col">
                      <ul class="icon-list">
                        <li><a href="/user/granicz/20191226-f-metablogging-introducing-blogengine-for-your-static-markdown-based-f-blog">2019 - F# metablogging: introducing BlogEngine for your static markdown-based F# blog</a></li>
                        <li><a href="/user/granicz/20181210-from-enterprise-to-next-generation-web-celebrating-11-years-with-websharper">2018 - From enterprise to next-generation web: celebrating 11 years with WebSharper</a></li>
                        <li><a href="/user/granicz/20171229-serving-spas">2017 - Serving SPAs</a></li>
                        <li><a href="/user/granicz/20161231-simple-reactive-scenarios-with-websharper">2016 - Simple reactive scenarios with WebSharper</a></li>
                        <li><a href="/user/jankoa/20161207-distributed-web-applications-in-f-with-websharper">2016 - Distributed web applications in F# with WebSharper</a></li>
                        <li><a href="http://localhost:5000/user/granicz/20151226-websharper-a-year-in-review">2015 - WebSharper: a year in review</a></li>
                      </ul>
                    </div>
                  </div>
                  <div class="panel">
                    <div class="col">
                      <ul class="icon-list">
                        <li><a href="elements/containers/accordion.html">Accordion</a></li>
                        <li><a href="elements/containers/album.html">Album</a></li>
                        <li><a href="elements/containers/collapse.html">Collapse</a></li>
                        <li><a href="elements/containers/fixed-area.html">Fixed area</a></li>
                        <li><a href="elements/containers/grid.html">Grid</a></li>
                        <li><a href="elements/containers/lightbox.html">Lightbox</a></li>
                      </ul>
                    </div>
                    <div class="col">
                      <ul class="icon-list">
                        <li><a href="elements/containers/masonry.html">Masonry</a></li>
                        <li><a href="elements/containers/scroll-box.html">Scroll box</a></li>
                        <li><a href="elements/containers/slider.html">Slider</a></li>
                        <li><a href="elements/containers/steps.html">Steps</a></li>
                        <li><a href="elements/containers/tab.html">Tab</a></li>
                        <li><a href="elements/sections/base.html">Section base</a></li>
                      </ul>
                    </div>
                    <div class="col">
                      <ul class="icon-list">
                        <li><a href="elements/sections/image.html">Section image</a></li>
                        <li><a href="elements/sections/slider.html">Section slider</a></li>
                        <li><a href="elements/sections/video.html">Section video</a></li>
                        <li><a href="elements/sections/block.html">Section block</a></li>
                        <li><a href="elements/sections/map.html">Section map</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </li>
            <li>
              <a href="/contact">Contact</a>
            </li>
          </ul>
          <div class="menu-right">
            <div class="menu-custom-area">
              <a class="btn btn-xs btn-circle" href="https://cloudsharper.com">Download CloudSharper</a>
            </div>
          </div>
          <div class="clear"></div>
        </div>
      </div></nav>

  
    
    <header class="header-image ken-burn-center align-center light boxed-page-header" data-parallax="true" data-natural-height="600" data-natural-width="1920" data-bleed="0" data-image-src="/assets/category3.jpg" data-offset="0">
      <div class="container">
        <h1>Rapid prototyping of DSLs in F# - Part III</h1>
        <h2>20090710</h2>
        <ol class="breadcrumb">
          <li><a href="/index.html">Home</a></li>
          <li><a href="/blogs">Blogs</a></li>
          <li><a href=""></a></li>
        </ol>
      </div>
    </header>
    <main>
      <section class="section-base boxed-page">
        <div class="container">
          <div class="row">
            <div class="col-lg-9 text-color">
              <div><div ws-preserve=""><p>Consider the following short Simply program:</p>
<pre><code class="language-fsharp">var x = 2
fun x(a b) { a + b + x  }
fun x(y)   { y + x(1 2) }

x(3)
</code></pre>
<p>Here &quot;x&quot; is defined multiple times: first it is assigned the value 2. Then it is redefined as a function taking two arguments, adding them together and incrementing the result with the previous value of &quot;x&quot;. It is again redefined as a new function taking a single argument and incrementing it with the result of the previous definition called with arguments 1 and 2. The point to take away from here is that &quot;x&quot; has different meanings in each line, and it is non-trivial to evaluate such code unless we perform some &quot;magic&quot; and verify that each reference to &quot;x&quot; is a valid one and signal an error otherwise. This is called semantic checking.</p>
<p>Normally semantic checking includes type checking, this is the phase in an interpreter or compiler when values are checked against type expectations of consuming functions or signatures. For instance, when you write &quot;1 @ [ 2 ]&quot; in F#, the compiler verifies that the &quot;@&quot; function (whose signature is 'A → 'A list → 'A list) can be called with parameters of type int and int list. Since these fit the more general polymorphic type signature, the compiler happily accepts this expression. However, when you try to add a string and an integer together, the compiler will flag it as an error because it can not find an instance of the plus operator (a function) that adds values of disparate types.</p>
<p>Recall however that in Simply the only values allowed are floating-point numbers (I will add more types, conditionals and recursive functions in an appendix to the series), and thus type checking Simply programs is a no-op. However, the &quot;core&quot; of the magic I talked about above are still to be done, so let's just jump right into it.</p>
<p>Now that I have a full parser for Simply from <a href="//intellifactory.com/user/granicz/20090622-rapid-prototyping-of-dsls-in-f-part-ii">Part II</a>, I am going to do two things on an AST value in a single sweep: rename variables and functions to avoid name collisions, and verify that variable and function references (and the arity of function calls) are valid. If you are coming from a functional programming background you may wonder about that last bit, but since Simply values are floating-point only the language can not have partial function calls. This limitation can be removed once a more elaborate type system (and closures) is added. So here is the first bif of the Standardize module:</p>
<pre><code class="language-fsharp">namespace IntelliFactory.Simply

module Standardize =
    open IntelliFactory.Simply.Ast
    
    type Arity =
        | NoArity
        | Arity of int

    module Env =
        let EnvAdd env (v: string, arity: Arity) =
            Map.tryFind v env
            |&gt; function
                | None -&gt;
                    0
                | Some (_, i) -&gt;
                    i+1
            |&gt; fun idx -&gt;
                Map.add v (arity, idx) env, idx |&gt; sprintf &quot;%s%d&quot; v

        let EnvRefresh env (v: string) =
            Map.tryFind v env
            |&gt; function
                | None -&gt;
                    v |&gt; sprintf &quot;The variable '%s' is not defined&quot; |&gt; failwith
                | Some (_, idx) -&gt;
                    idx |&gt; sprintf &quot;%s%d&quot; v

        let EnvArity env (v: string) =
            Map.tryFind v env
            |&gt; function
                | None -&gt;
                    v |&gt; sprintf &quot;The function '%s' is not defined&quot; |&gt; failwith
                | Some (arity, _) -&gt;
                    arity
</code></pre>
<p>This contains an inner Env module that supplies various utility functions: EnvAdd to add a new binding with its name and arity (variables have Arity.NoArity), EnvRefresh to return the latest binding to a given concrete variable name (I simply number these bindings from 0 - see EnvAdd above), and EnvArity to return the arity of the latest binding of a given variable.</p>
<p>All three functions operate on environments. Internally, these are represented as a map from strings (concrete variable names) to arity*index pairs, where index is simply an integer suffix that gets appended to the original variable name to form a fresh binding (and thus the parser doesn't allow variable names to contain numeric characters). The rest of the standardization module is:</p>
<pre><code class="language-fsharp">    let private thread f acc (lst: 'a list) =
        lst
        |&gt; List.fold (fun (acc1, acc2) el -&gt;
            let _acc1, _acc2 = f acc1 el
            _acc1, _acc2 :: acc2) (acc, [])
        |&gt; fun (acc1, acc2) -&gt;
            acc1, List.rev acc2
    let rec ConvertProgram env (Ast.Program commands) =
        commands
        |&gt; thread CC env
        |&gt; fun (env, commands) -&gt;
            env, commands |&gt; Ast.Program
    and private CC env command =
        match command with
        | Ast.Command.Repeat (expr, v, body) -&gt;
            let _env, _v = Env.EnvAdd env (v, Arity.NoArity)
            env, Ast.Command.Repeat (CE env expr, _v, CC _env body |&gt; snd)
        | Ast.Command.FunDef (f, pars, body) -&gt;
            let _env, _f =
                Env.EnvAdd env (f, pars |&gt; List.length |&gt; Arity.Arity)
            pars
            |&gt; List.map (fun par -&gt; par, Arity.NoArity)
            |&gt; thread Env.EnvAdd _env
            |&gt; fun (envPars, parsP) -&gt;
                _env, Ast.Command.FunDef (_f, parsP, CC envPars body |&gt; snd)
        | Ast.Command.Sequence commands -&gt;
            commands
            |&gt; thread CC env
            |&gt; fun (_, commands) -&gt;
                env, Ast.Command.Sequence commands
        | Ast.Command.VarDef (v, expr) -&gt;
            let _env, _v = Env.EnvAdd env (v, Arity.NoArity)
            _env, Ast.Command.VarDef (_v, CE env expr)
        | Ast.Yield e -&gt;
            env, Yield (CE env e)
    and private CE env expr =
        match expr with
        | Ast.Expr.Number n -&gt;
            Ast.Expr.Number n
        | Ast.Expr.Var v -&gt;
            v
            |&gt; Env.EnvArity env
            |&gt; function
                | NoArity -&gt;
                    v
                    |&gt; Env.EnvRefresh env
                    |&gt; Ast.Expr.Var
                | Arity _ -&gt;
                    v
                    |&gt; sprintf &quot;'%s' is a function and needs arguments&quot;
                    |&gt; failwith
        | Ast.Expr.BinOp (f, e1, e2) -&gt;
            Ast.Expr.BinOp (f, CE env e1, CE env e2)
        | Ast.Expr.FunApply (f, args) -&gt;
            Env.EnvRefresh env f
            |&gt; fun _f -&gt;
                f
                |&gt; Env.EnvArity env
                |&gt; function
                    | Arity ar when ar = List.length args -&gt;
                        Ast.Expr.FunApply (_f, List.map (CE env) args)
                    | _ -&gt;
                        f
                        |&gt; sprintf &quot;Arity mismatch on calling '%s'&quot;
                        |&gt; failwith
</code></pre>
<p>Having the Ast, Language and Standardize modules loaded up in F# Interactive allows me to test the standardizer quickly:</p>
<pre><code class="language-fsharp">&quot;
var x=1
var x=2
var x=3

fun foo(y) {
    fun bar(foo) {
        var x=x+1
        foo+x
    }
    bar(y*2)
}

repeat 1000 as x {
    foo(x)
}&quot;
|&gt; fun s -&gt;
    match s with
    | Language.Prog (prog, Language.Eof) -&gt;
        prog
        |&gt; Standardize.ConvertProgram Map.Empty
        |&gt; fun (_, _prog) -&gt;
            _prog |&gt; printf &quot;Result=%A\n&quot;
    | _ -&gt;
        printf &quot;Syntax error\n&quot;;;
</code></pre>
<p>gives:</p>
<pre><code class="language-fsharp">&gt; 
Result=Program
  [VarDef (&quot;x0&quot;,Number 1.0); VarDef (&quot;x1&quot;,Number 2.0); VarDef (&quot;x2&quot;,Number 3.0);
   FunDef
     (&quot;foo0&quot;,[&quot;y0&quot;],
      Sequence
        [FunDef
           (&quot;bar0&quot;,[&quot;foo1&quot;],
            Sequence
              [VarDef (&quot;x3&quot;,BinOp (&lt;fun:Sum@44&gt;,Var &quot;x2&quot;,Number 1.0));
               Yield (BinOp (&lt;fun:Sum@44&gt;,Var &quot;foo1&quot;,Var &quot;x3&quot;))]);
         Yield (FunApply (&quot;bar0&quot;,[BinOp (&lt;fun:Prod@46&gt;,Var &quot;y0&quot;,Number 2.0)]))]);
   Repeat (Number 1000.0,&quot;x3&quot;,Sequence [Yield (FunApply (&quot;foo0&quot;,[Var &quot;x3&quot;]))])]
val it : unit = ()
&gt;

</code></pre>
<p>Which if I had a pretty-printer would correspond to:</p>
<pre><code class="language-fsharp">var x0=1
var x1=2
var x2=3

fun foo0(y0) {
    fun bar0(foo1) {
        var x3=x2+1
        foo1+x3
    }
    bar0(y0*2)
}

repeat 1000 as x3 {
    foo0(x3)
}
</code></pre>
<p>Now bindings and their usage sites are clearly coupled, arities are checked on function calls, and variable and function names are checked for existence. With this I have just enough to implement an evaluator that comes with some built-in functions, and plug it in into a small shell that enables me to write and test Logo-flavour Simply programs. So stay tuned for Part IV of this series!</p>
</div></div>
              <hr class="space" />
              <div class="icon-links icon-links-button full-width icon-social social-colors">
                <a data-social="share-facebook" class="facebook"><i class="icon-facebook"></i></a>
                <a data-social="share-twitter" class="twitter"><i class="icon-twitter"></i></a>
                <a data-social="share-linkedin" class="linkedin"><i class="icon-linkedin"></i></a>
                <a data-social="share-pinterest" class="pinterest"><i class="icon-pinterest"></i></a>
              </div>
              <hr />
              <div class="cnt-box cnt-box-side box-small">
                <a href="#" class="img-box"><img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub source" /></a>
                <div class="caption">
                  <h2>Found a typo?</h2>
                  <p>
                    This blog post is hosted on GitHub <a href="https://github.com/IntelliFactory/blogs/tree/master/user/granicz/20090710-rapid-prototyping-of-dsls-in-f-part-iii.md">here</a>. Feel free to file a ticket or send a PR.
                  </p>
                </div>
              </div>
              <hr />
              <h2>Other articles you might be interested in</h2>
              <hr class="space-sm" />
              <div class="grid-list" data-columns="3" data-columns-sm="1">
                <div class="grid-box">
                  <div class="grid-item">
                    <div href="#" class="cnt-box cnt-box-top-icon boxed doc-boxed align-left">
                      <div class="caption">
                        <h2>Jessica Adams Exibition In New York With After Show</h2>
                        <div class="extra-field">Technology</div>
                        <p>
                          October 25, 2019
                        </p>
                      </div>
                    </div>
                  </div>
                  <div class="grid-item">
                    <div href="#" class="cnt-box cnt-box-top-icon boxed doc-boxed align-left">
                      <div class="caption">
                        <h2>How to change your business and make money</h2>
                        <div class="extra-field">Business</div>
                        <p>
                          October 24, 2019
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-lg-3 widget">
              
              <div>
                <h3>Tagged as</h3>
                <hr class="space-xs" />
                <div class="tabs"><div>
                    <a href="/category/dsl">
                      dsl
                    </a>
                  </div><div>
                    <a href="/category/fsharp">
                      fsharp
                    </a>
                  </div><div>
                    <a href="/category/websharper">
                      websharper
                    </a>
                  </div></div>
                <h3>Latest posts</h3>
                <hr class="space-sm" />
                <div class="menu-inner menu-inner-vertical menu-inner-image">
                    <ul>
                      <li>
                        <a href="/user/granicz/20201231-variations-for-a-websharper-shopping-cart">
                          <img src="/assets/category3-thumb.jpg" alt="Variations for a WebSharper shopping cart" />
                          Variations for a WebSharper shopping cart
                          <span>12/31/2020</span>
                        </a>
                      </li><li>
                        <a href="/user/denuziere/20200523-bolero-0-13-released">
                          <img src="/assets/category5-thumb.jpg" alt="Bolero 0.13 released" />
                          Bolero 0.13 released
                          <span>05/23/2020</span>
                        </a>
                      </li><li>
                        <a href="/user/denuziere/20200323-bolero-0-12-released">
                          <img src="/assets/category5-thumb.jpg" alt="Bolero 0.12 released" />
                          Bolero 0.12 released
                          <span>03/23/2020</span>
                        </a>
                      </li><li>
                        <a href="/user/granicz/20200116-converting-a-websharper-html-app-to-a-client-server-one">
                          <img src="/assets/category4-thumb.jpg" alt="Converting a WebSharper HTML app to a client-server one" />
                          Converting a WebSharper HTML app to a client-server one
                          <span>01/16/2020</span>
                        </a>
                      </li><li>
                        <a href="/post/20200101-writing-instructions.html">
                          <img src="/assets/category4-thumb.jpg" alt="Writing instructions" />
                          Writing instructions
                          <span>01/01/2020</span>
                        </a>
                      </li><li>
                        <a href="/user/granicz/20191226-f-metablogging-introducing-blogengine-for-your-static-markdown-based-f-blog">
                          <img src="/assets/category4-thumb.jpg" alt="F# metablogging: introducing BlogEngine for your static markdown-based F# blog" />
                          F# metablogging: introducing BlogEngine for your static markdown-based F# blog
                          <span>12/26/2019</span>
                        </a>
                      </li><li>
                        <a href="/user/denuziere/20190924-bolero-0-9-released">
                          <img src="/assets/category5-thumb.jpg" alt="Bolero 0.9 released" />
                          Bolero 0.9 released
                          <span>09/24/2019</span>
                        </a>
                      </li><li>
                        <a href="/user/granicz/20190905-your-first-bolero-project-not-compiling-try-this">
                          <img src="/assets/category1-thumb.jpg" alt="Your first Bolero project not compiling? Try this!" />
                          Your first Bolero project not compiling? Try this!
                          <span>09/05/2019</span>
                        </a>
                      </li><li>
                        <a href="/user/denuziere/20190805-bolero-0-7-released">
                          <img src="/assets/category5-thumb.jpg" alt="Bolero 0.7 released" />
                          Bolero 0.7 released
                          <span>08/05/2019</span>
                        </a>
                      </li><li>
                        <a href="/user/denuziere/20190530-bolero-0-5-released-for-blazor-3-0-preview">
                          <img src="/assets/category5-thumb.jpg" alt="Bolero 0.5 released for Blazor 3.0-preview" />
                          Bolero 0.5 released for Blazor 3.0-preview
                          <span>05/30/2019</span>
                        </a>
                      </li>
                      
                    </ul>
                  </div>
                <hr class="space-sm" />
                <h3>Twitter</h3>
                <hr class="space-sm" />
                <div class="social-feed social-feed-tw social-slider" data-social-id="twitter" data-options="count:8,arrows:true,nav:true,controls:out,type:carousel,perView:1"></div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
  
  <i class="scroll-top-btn scroll-top show"></i>
  <footer class="footer light">
      
          <div class="container">
              <div class="row">
                  <div class="col-lg-2">
                      <h4>Company</h4>
                      <div class="menu-inner menu-inner-vertical">
                          <ul>
                              <li>
                                  <a href="/consulting">Consulting</a>
                              </li>
                              <li>
                                  <a href="/trainings">Trainings</a>
                              </li>
                              <li>
                                  <a href="/research">Research</a>
                              </li>
                              <li>
                                  <a href="/jobs">Jobs</a>
                              </li>
                              <li>
                                  <a href="/contact">Contact</a>
                              </li>
                          </ul>
                      </div>
                  </div>
                  <div class="col-lg-2">
                      <h4>Blogs</h4>
                      <div class="menu-inner menu-inner-vertical">
                          <ul>
                              <li>
                                  <a href="/blogs">Latest</a>
                              </li>
                              <li>
                                  <a href="/category/fsharp">F#</a>
                              </li>
                              <li>
                                  <a href="/category/websharper">WebSharper</a>
                              </li>
                              <li>
                                  <a href="/category/bolero">Bolero</a>
                              </li>
                              <li>
                                  <a href="/category/cloudsharper">CloudSharper</a>
                              </li>
                          </ul>
                      </div>
                  </div>
                  <div class="col-lg-4">
                      <h4>Legal</h4>
                      <div class="menu-inner menu-inner-vertical">
                          <ul>
                              <li>
                                  <a href="/terms-of-use">Terms of use</a>
                              </li>
                              <li>
                                  <a href="/privacy-policy">Privacy Policy</a>
                              </li>
                              <li>
                                  <a href="/cookie-policy">Cookie Policy</a>
                              </li>
                              <li>
                                  <a href="/QualityAndIntegratedSecurityPolicy.pdf">Integrated Quality and Information Security Policy</a>
                              </li>
                          </ul>
                      </div>
                  </div>
                  <div class="col-lg-4">
                      <h4>Newsletter signup</h4>
                      <p>We will not spam you or give your details to anyone.</p>
                      <form class="newsletter-form form-box form-ajax" method="post" data-email="example@domain.com">
                          <input style="width:200px" id="nemail" name="nemail" placeholder="Your email" type="email" class="input-text" required="" />
                          <button id="signUp" class="btn btn-sm btn-circle" type="submit">
                              <span>Sign Up</span>
                              <i class="fas fa-spinner fa-spin"></i>
                          </button>
                          <div class="success-box">
                              <div class="alert alert-success">Congratulations. You have signed up successfully!</div>
                          </div>
                          <div class="error-box">
                              <div class="alert alert-warning">Error, please retry. You were not signed up for the newsletter.</div>
                          </div>
                      </form>
                  </div>
              </div>
          </div>
          <div class="footer-bar">
              <div class="container">
                  <span>Made with</span>
                  <img width="24" height="20" style="vertical-align:top;" alt="Love" src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/42/Love_Heart_SVG.svg/32px-Love_Heart_SVG.svg.png" />
                  <span>in 100% F# with WebSharper. Copyright © IntelliFactory 2004-2020. Site design created by Schiocco Team.</span>
                  <span class="icon-links icon-social icon-links-grid social-colors">
                    <a class="facebook" href="https://www.facebook.com/intellifactory"><i class="fab fa-facebook"></i></a>
                    <a class="twitter" href="https://twitter.com/intellifactory"><i class="fab fa-twitter"></i></a>
                    <a class="linkedin" href="https://www.linkedin.com/company/intellifactory"><i class="fab fa-linkedin"></i></a>
                    <a class="youtube" href="https://www.youtube.com/results?search_query=intellifactory"><i class="fab fa-youtube"></i></a>
                    <a class="vimeo" href="https://vimeo.com/user15828007"><i class="fab fa-vimeo"></i></a>
                  </span>
              </div>
          </div>
      
      <div></div>
      <div id="cookie-banner"><p>This site uses cookies and other tracking technologies to assist with navigation and your ability to provide feedback, and analyse your use of our products and services.</p><a target="_blank" href="/cookie-policy">Read our Cookie Policy</a><div><button onclick="wscookies.accept()">Accept cookies</button><button onclick="wscookies.refuse()">Refuse cookies</button></div></div><script>
    var wscookies = {
        accepted: document.cookie.replace(/(?:(?:^|.*;\s*)cookie_accept\s*\=\s*([^;]*).*$)|^.*$/, "$1"),
        accept: function () {
        document.cookie = 'cookie_accept=true;max-age=31536000';
        this.set_banner('none');
        this.after_accept();
        },
        after_accept: function () { },
        refuse: function () {
        document.cookie = 'cookie_accept=false;max-age=31536000';
        this.set_banner('none');
        },
        set_banner: function (style) {
        document.getElementById('cookie-banner').style.display = style;
        }
    };
    switch (wscookies.accepted) {
        case '':
        wscookies.set_banner('flex');
        break;
        case 'true':
        wscookies.accept();
        break;
        default:
        wscookies.refuse();
    }
</script>
      <link rel="stylesheet" href="/themekit/media/icons/iconsmind/line-icons.min.css" />
      <link async="" rel="stylesheet" href="/themekit/media/icons/fontawesome/icon.css" />
      <script src="/themekit/scripts/parallax.min.js"></script>
      <script src="/themekit/scripts/imagesloaded.min.js"></script>
      <script src="/themekit/scripts/pagination.min.js"></script>
      <script src="/themekit/scripts/social.min.js"></script>
      <script src="/themekit/scripts/tab-accordion.js"></script>
      <script src="/media/custom.js"></script>
      <script src="/js/Client.js"></script>
      <meta id='websharper-data' name='websharper-data' content='{"$TYPES":[],"$DATA":{"$V":{}}}' />
<script src="../../Scripts/WebSharper.Core.JavaScript/Runtime.js" type="text/javascript" charset="UTF-8"></script><script type="text/javascript">
if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '../../Scripts/';
  IntelliFactory.Runtime.Start();
}
</script>

      <script src="//unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
      <script src="//unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
      <script>
          $(document).ready(function () {
              var $container = $('.masonry');
              $container.imagesLoaded(function () {
                  $container.masonry({
                      itemSelector: '.masonry-item',
                      percentPosition: true,
                      horizontalOrder: true
                  });
              });
          });
      </script>
  </footer>
</body>
</html>