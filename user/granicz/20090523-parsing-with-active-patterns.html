<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Parsing with active patterns | IntelliFactory</title>
  <meta name="description" content="" />
  <link rel="stylesheet" href="/themekit/css/bootstrap-grid.css" />
  <link rel="stylesheet" href="/themekit/css/style.css" />
  <link rel="stylesheet" href="/themekit/css/content-box.css" />
  <link rel="stylesheet" href="/themekit/css/media-box.css" />
  <link rel="stylesheet" href="/themekit/css/social.css" />
  <link rel="stylesheet" href="/themekit/css/contact-form.css" />
  <link rel="stylesheet" href="/assets/skin.css" />
  <link rel="stylesheet" href="/assets/custom.css" />
  <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/highlight.min.js" type="text/javascript" charset="UTF-8"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/languages/fsharp.min.js" type="text/javascript" charset="UTF-8"></script><link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/styles/vs.min.css"></link>
<script src="https://code.jquery.com/jquery-3.1.1.min.js" type="text/javascript" charset="UTF-8"></script>
  <script src="/themekit/scripts/main.js"></script>
</head>
<body>
  <div id="preloader"></div>
  <nav class="menu-classic  light menu-fixed menu-one-page align-right" data-menu-anima="fade-bottom" data-scroll-detect="true">
    <div class="container">
        <div class="menu-brand">
          <a href="#">
            <img class="logo-default" src="/assets/if_logo.png" alt="logo" />
            <img class="logo-retina" src="/assets/if_logo.png" alt="logo" />
            <span>IntelliFactory</span>
          </a>
        </div>
        <i class="menu-btn"></i>
        <div class="menu-cnt">
          <ul>
            <li>
              <a href="index.html">Consulting</a>
            </li>
            <li class="mega-dropdown mega-tabs mega-open-source">
              <a href="#">Open Source</a>
              <div class="mega-menu">
                <div class="panel">
                  <div class="col-4">
                    <img src="//via.placeholder.com/100x100" />
                    <div><a href="https://websharper.com">WebSharper</a></div>
                    <div class="description">
                      <div>This is an example text under this feel free to change this</div>
                    </div>
                  </div>
                  <div class="col-4">
                    <img src="//via.placeholder.com/100x100" />
                    <div><a href="https://fsbolero.io">Bolero</a></div>
                    <div class="description">
                      <div>This is an example text under this feel free to change this</div>
                    </div>
                  </div>
                  <div class="col-4">
                    <img src="//via.placeholder.com/100x100" />
                    <div><a href="https://github.com/granicz/SiteFi">SiteFi</a></div>
                    <div class="description">
                      <div>This is an example text under this feel free to change this</div>
                    </div>
                  </div>
                </div>
              </div>
            </li>
            <li>
              <a href="/trainings">Trainings</a>
            </li>
            <li>
              <a href="/research">Research</a>
            </li>
            <li class="mega-dropdown mega-tabs">
              <a href="/blogs">Blogs</a>
              <div class="mega-menu">
                <div class="tab-box" data-tab-anima="fade-in">
                  <ul class="tab-nav">
                    <li class="active"><a href="#">F# Advent</a></li>
                    <li><a href="#">Categories</a></li>
                  </ul>
                  <div class="panel active">
                    <div class="col">
                      <ul class="icon-list">
                        <li><a href="/user/granicz/20191226-f-metablogging-introducing-blogengine-for-your-static-markdown-based-f-blog">2019 - F# metablogging: introducing BlogEngine for your static markdown-based F# blog</a></li>
                        <li><a href="/user/granicz/20181210-from-enterprise-to-next-generation-web-celebrating-11-years-with-websharper">2018 - From enterprise to next-generation web: celebrating 11 years with WebSharper</a></li>
                        <li><a href="/user/granicz/20171229-serving-spas">2017 - Serving SPAs</a></li>
                        <li><a href="/user/granicz/20161231-simple-reactive-scenarios-with-websharper">2016 - Simple reactive scenarios with WebSharper</a></li>
                        <li><a href="/user/jankoa/20161207-distributed-web-applications-in-f-with-websharper">2016 - Distributed web applications in F# with WebSharper</a></li>
                        <li><a href="http://localhost:5000/user/granicz/20151226-websharper-a-year-in-review">2015 - WebSharper: a year in review</a></li>
                      </ul>
                    </div>
                  </div>
                  <div class="panel">
                    <div class="col">
                      <ul class="icon-list">
                        <li><a href="elements/containers/accordion.html">Accordion</a></li>
                        <li><a href="elements/containers/album.html">Album</a></li>
                        <li><a href="elements/containers/collapse.html">Collapse</a></li>
                        <li><a href="elements/containers/fixed-area.html">Fixed area</a></li>
                        <li><a href="elements/containers/grid.html">Grid</a></li>
                        <li><a href="elements/containers/lightbox.html">Lightbox</a></li>
                      </ul>
                    </div>
                    <div class="col">
                      <ul class="icon-list">
                        <li><a href="elements/containers/masonry.html">Masonry</a></li>
                        <li><a href="elements/containers/scroll-box.html">Scroll box</a></li>
                        <li><a href="elements/containers/slider.html">Slider</a></li>
                        <li><a href="elements/containers/steps.html">Steps</a></li>
                        <li><a href="elements/containers/tab.html">Tab</a></li>
                        <li><a href="elements/sections/base.html">Section base</a></li>
                      </ul>
                    </div>
                    <div class="col">
                      <ul class="icon-list">
                        <li><a href="elements/sections/image.html">Section image</a></li>
                        <li><a href="elements/sections/slider.html">Section slider</a></li>
                        <li><a href="elements/sections/video.html">Section video</a></li>
                        <li><a href="elements/sections/block.html">Section block</a></li>
                        <li><a href="elements/sections/map.html">Section map</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </li>
            <li>
              <a href="/contact">Contact</a>
            </li>
          </ul>
          <div class="menu-right">
            <div class="menu-custom-area">
              <a class="btn btn-xs btn-circle" href="https://cloudsharper.com">Download CloudSharper</a>
            </div>
          </div>
          <div class="clear"></div>
        </div>
      </div></nav>

  
    
    <header class="header-image ken-burn-center align-center light boxed-page-header" data-parallax="true" data-natural-height="600" data-natural-width="1920" data-bleed="0" data-image-src="/assets/category0.jpg" data-offset="0">
      <div class="container">
        <h1>Parsing with active patterns</h1>
        <h2>20090523</h2>
        <ol class="breadcrumb">
          <li><a href="/index.html">Home</a></li>
          <li><a href="/blogs">Blogs</a></li>
          <li><a href=""></a></li>
        </ol>
      </div>
    </header>
    <main>
      <section class="section-base boxed-page">
        <div class="container">
          <div class="row">
            <div class="col-lg-9 text-color">
              <div><div ws-preserve=""><p>I was giving an F# warm-up a couple days ago at <a href="http://www.inf.elte.hu/english/conf/tfp_cefp_2009/Lapok/index.aspx">CEFP 2009</a>, and one of the examples I was giving was on active patterns and their application for Parsing Expression Grammars (PEGs). In short, PEGs are a way to specify grammars using functions that either succeed or fail, and combining them to form a recursive-descent parser.</p>
<p>The cool thing about active patterns is that they provide the perfect mechanism to implement PEGs - and at the same time allowing you to quickly prototype even complex grammars using a statically typed approach and without the need to resort to lexer and parser generators.</p>
<p>If you are interested in parsing with active patterns, there are some great articles <a href="http://devhawk.net/2008/01/29/Practical+F+Parsing+Recursion+And+Predicate+Functions.aspx">here</a> (be sure to check out DewHawk's other articles on this topic) and <a href="http://langexplr.blogspot.com/2008/11/using-mgrammar-parser-from-f.html">here</a> (Luis has some other great F# posts also).</p>
<pre><code class="language-fsharp">    open System
    open System.Text.RegularExpressions

    let matchToken pattern s =
        Regex.Match(s, pattern |&gt; sprintf &quot;\A(%s)((?s).*)&quot;, RegexOptions.Multiline)
        |&gt; fun mtch -&gt;
            if mtch.Success then
                (mtch.Groups.[1].Value, mtch.Groups.[2].Value) |&gt; Some
            else
                None
</code></pre>
<p>This defines a <code>matchToken</code> function that takes a regex pattern and an input string and tries to apply the regex on that input. Note that you are wrapping the regex pattern into two groups - one for the input pattern (%s) and another for the remaining input string ((?s).*). (\A specifies that you are matching from the beginning of the input string, and (?s) instructs the matcher to match irrespective of new line characters.)</p>
<p>You can now express whitespace and one-line comments (just to be different we use # for these) easily:</p>
<pre><code class="language-fsharp">    let (|WS|_|) s =
        matchToken &quot;[ |\t|\n|\r\n]+&quot; s
    
    let (|COMMENT|_|) s =
        matchToken &quot;#.*[\n|\r\n]&quot; s
</code></pre>
<p>Using these you can define whitespace as:</p>
<pre><code class="language-fsharp">    let (|WHITESPACE|_|) s =
        match s with
        | WS rest -&gt;
            rest |&gt; Some
        | COMMENT rest -&gt;
            rest |&gt; Some
        | _ -&gt;
            None
</code></pre>
<p>This says that a WHITESPACE is either whitespace (space, tab, LF, or CR+LF) or a comment. Note that you defined whitespace (WS) with a regex that matches any number of whitespace characters, but even with that WHITESPACE won't match things like &quot; # one-line comment \n &quot; (whitespace and comments following each other), simply because WHITESPACE will either match a WS <em>or</em> a COMMENT. (Remember that this is why active patterns are great to develop PEGs - there is no ambiguity in parsing: once a match is made, all other choices are ignored.)</p>
<p>What you need is the * operator from ordinary BNF syntax: this matches zero or more occurences of something.</p>
<pre><code class="language-fsharp">    let rec (|Star|_|) f acc s =
        match f s with
        | Some (res, rest) -&gt;
            (|Star|_|) f (res :: acc) rest
        | None -&gt;
            (acc, s) |&gt; Some
</code></pre>
<p>The way you accomplish this is trying to parse a new symbol (via f), and if you succeed you recurse on the remaining input string with the matched input accumulated. If matching fails you simply return what you accumulated in preceeding calls. (Note that this function never fails - if you need &quot;one or more&quot; matches you need to modify the None clause to return None if the first match was unsuccessful.) Normally, you would want to call (|Star|_|) with an empty list at first:</p>
<pre><code class="language-fsharp">    let (|WhiteSpace|_|) s = (|Star|_|) (|WHITESPACE|_|) [] s
</code></pre>
<p>This just says that WhiteSpace matches zero or more WHITESPACEs and will return a string list of these whitespace blocks and the remaining input string.
Armed with WhiteSpace you can implement your basic &quot;tokenizer.&quot; For most grammars whitespace is ignored (a notable exception here is F# where indentation does matter), and in general it is much more tedious to treat whitespace as separate tokens.</p>
<pre><code class="language-fsharp">    let rec MatchTokenNoWS wspattern s pattern =
        match (|WhiteSpace|_|) s with
        | Some (_, rest) -&gt;
            rest |&gt; matchToken pattern
        | None -&gt;
            s |&gt; matchToken pattern
</code></pre>
<p>This function simply removes any leading whitespace before matching a regex pattern. You can now write a function that parses a token for a given regex as:</p>
<pre><code class="language-fsharp">    let MatchToken s f pattern =
        pattern |&gt; MatchTokenNoWS s |&gt; Option.bind f
</code></pre>
<p>Here the parameter f carries the function that is executed on the match - which, has type (string * string), where the first value in the tuple is the string matched, the second is the remaining input string.</p>
<p>For tokens where you don't need the matched string (operators, keywords, etc.) you can write a function that returns only the rest of the input:</p>
<pre><code class="language-fsharp">    let MatchSymbol s pattern =
        pattern |&gt; MatchToken s (fun (_, rest) -&gt; rest |&gt; Some)
</code></pre>
<p>Now you have all the primitives to start building your parsers. Consider a simple language of arithmetic expressions:</p>
<ul>
<li>Numbers</li>
<li>Arithmetic (addition, subtraction, multiplication, division)</li>
<li>Functions (sin, cos, etc.)</li>
</ul>
<p>A straightforward translation of this small language into F# types would be:</p>
<pre><code class="language-fsharp">module Ast =
    type var = string

    type Expr =
    | Number   of float
    | Sum      of Expr * Expr
    | Diff     of Expr * Expr
    | Prod     of Expr * Expr
    | Ratio    of Expr * Expr
    | Var      of var
    | FunApply of var * Expr list
</code></pre>
<p>The parser is strikingly straightforward as well:</p>
<pre><code class="language-fsharp">    let (|NUMBER|_|) s =
        &quot;[0-9]+\.?[0-9]*&quot; |&gt; MatchToken s
            (fun (n, rest) -&gt; (n |&gt; Double.Parse, rest) |&gt; Some)

    let (|ID|_|) s =
        &quot;[a-zA-Z]+&quot; |&gt; MatchToken s (fun res -&gt; res |&gt; Some)

    let (|PLUS|_|)   s = &quot;\+&quot; |&gt; MatchSymbol s
    let (|MINUS|_|)  s = &quot;-&quot;  |&gt; MatchSymbol s
    let (|MUL|_|)    s = &quot;\*&quot; |&gt; MatchSymbol s
    let (|DIV|_|)    s = &quot;/&quot;  |&gt; MatchSymbol s
    let (|LPAREN|_|) s = &quot;\(&quot; |&gt; MatchSymbol s
    let (|RPAREN|_|) s = &quot;\)&quot; |&gt; MatchSymbol s
    
    let rec (|Factor|_|) = function
    | NUMBER (n, rest) -&gt;
        (Ast.Expr.Number n, rest) |&gt; Some
    | ID (f, LPAREN (Star (|Expression|_|) [] (args, RPAREN rest))) -&gt;
        (Ast.Expr.FunApply (f, args), rest) |&gt; Some
    | ID (v, rest) -&gt;
        (Ast.Expr.Var v, rest) |&gt; Some
    | _ -&gt;
        None
        
    and (|Term|_|) = function
    | Factor (e1, MUL (Term (e2, rest))) -&gt;
        (Ast.Expr.Prod (e1, e2), rest) |&gt; Some
    | Factor (e1, DIV (Term (e2, rest))) -&gt;
        (Ast.Expr.Ratio (e1, e2), rest) |&gt; Some
    | Factor (e, rest) -&gt;
        (e, rest) |&gt; Some
    | _ -&gt;
        None

    and (|Sum|_|) = function
    | Term (e1, PLUS (Sum (e2, rest))) -&gt;
        (Ast.Expr.Sum (e1, e2), rest) |&gt; Some
    | Term (e1, MINUS (Sum (e2, rest))) -&gt;
        (Ast.Expr.Diff (e1, e2), rest) |&gt; Some
    | Term (e, rest) -&gt;
        (e, rest) |&gt; Some
    | _ -&gt;
        None

    and (|Expression|_|) = (|Sum|_|)
</code></pre>
<p>One last bit that you will need for practical parsing is checking for EOFs - afterall full programs are only valid if the entire input string was consumed.</p>
<pre><code class="language-fsharp">    let (|Eof|_|) s =
        if s |&gt; String.IsNullOrEmpty then
            () |&gt; Some
        else
            match s with
            | WhiteSpace (_, rest) when rest |&gt; String.IsNullOrEmpty -&gt;
                () |&gt; Some
            | _ -&gt;
                None
</code></pre>
<p>You can quickly test your code in F# Interactive:</p>
<pre><code class="language-fsharp">&gt; match &quot;sin(1 + 2 * 3)&quot; with
    | Expression (e, Eof) -&gt;
        e |&gt; printf &quot;Match – AST: %A\n&quot;
    | _ -&gt;
        printf &quot;No match\n”;;

&gt; Match – AST: FunApply (&quot;sin&quot;,[Sum (Integer 1,Prod (Integer 2,Integer 3))])
</code></pre>
<p>You can also call active pattern recognizers directly and this can be tremenedously useful when debugging your parser rules:</p>
<pre><code class="language-fsharp">&gt; (|Expression|_|) &quot;cos(1+2*3-4)&quot;;;
val it : (Ast.Expr * string) option =
  Some
    (FunApply
       (&quot;cos&quot;,
        [Sum (Number 1.0,Diff (Prod (Number 2.0,Number 3.0),Number 4.0))]), &quot;&quot;)
</code></pre>
</div></div>
              <hr class="space" />
              <div class="icon-links icon-links-button full-width icon-social social-colors">
                <a data-social="share-facebook" class="facebook"><i class="icon-facebook"></i></a>
                <a data-social="share-twitter" class="twitter"><i class="icon-twitter"></i></a>
                <a data-social="share-linkedin" class="linkedin"><i class="icon-linkedin"></i></a>
                <a data-social="share-pinterest" class="pinterest"><i class="icon-pinterest"></i></a>
              </div>
              <hr />
              <div class="cnt-box cnt-box-side box-small">
                <a href="#" class="img-box"><img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub source" /></a>
                <div class="caption">
                  <h2>Found a typo?</h2>
                  <p>
                    This blog post is hosted on GitHub <a href="https://github.com/IntelliFactory/blogs/tree/master/user/granicz/20090523-parsing-with-active-patterns.md">here</a>. Feel free to file a ticket or send a PR.
                  </p>
                </div>
              </div>
              <hr />
              <h2>Other articles you might be interested in</h2>
              <hr class="space-sm" />
              <div class="grid-list" data-columns="3" data-columns-sm="1">
                <div class="grid-box">
                  <div class="grid-item">
                    <div href="#" class="cnt-box cnt-box-top-icon boxed doc-boxed align-left">
                      <div class="caption">
                        <h2>Jessica Adams Exibition In New York With After Show</h2>
                        <div class="extra-field">Technology</div>
                        <p>
                          October 25, 2019
                        </p>
                      </div>
                    </div>
                  </div>
                  <div class="grid-item">
                    <div href="#" class="cnt-box cnt-box-top-icon boxed doc-boxed align-left">
                      <div class="caption">
                        <h2>How to change your business and make money</h2>
                        <div class="extra-field">Business</div>
                        <p>
                          October 24, 2019
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-lg-3 widget">
              
              <div>
                <h3>Tagged as</h3>
                <hr class="space-xs" />
                <div class="tabs"><div>
                    <a href="/category/activepatterns">
                      activepatterns
                    </a>
                  </div><div>
                    <a href="/category/fsharp">
                      fsharp
                    </a>
                  </div><div>
                    <a href="/category/parsing">
                      parsing
                    </a>
                  </div></div>
                <h3>Latest posts</h3>
                <hr class="space-sm" />
                <div class="menu-inner menu-inner-vertical menu-inner-image">
                    <ul>
                      <li>
                        <a href="/user/granicz/20201231-variations-for-a-websharper-shopping-cart">
                          <img src="/assets/category3-thumb.jpg" alt="Variations for a WebSharper shopping cart" />
                          Variations for a WebSharper shopping cart
                          <span>12/31/2020</span>
                        </a>
                      </li><li>
                        <a href="/user/denuziere/20200523-bolero-0-13-released">
                          <img src="/assets/category5-thumb.jpg" alt="Bolero 0.13 released" />
                          Bolero 0.13 released
                          <span>05/23/2020</span>
                        </a>
                      </li><li>
                        <a href="/user/denuziere/20200323-bolero-0-12-released">
                          <img src="/assets/category5-thumb.jpg" alt="Bolero 0.12 released" />
                          Bolero 0.12 released
                          <span>03/23/2020</span>
                        </a>
                      </li><li>
                        <a href="/user/granicz/20200116-converting-a-websharper-html-app-to-a-client-server-one">
                          <img src="/assets/category4-thumb.jpg" alt="Converting a WebSharper HTML app to a client-server one" />
                          Converting a WebSharper HTML app to a client-server one
                          <span>01/16/2020</span>
                        </a>
                      </li><li>
                        <a href="/post/20200101-writing-instructions.html">
                          <img src="/assets/category4-thumb.jpg" alt="Writing instructions" />
                          Writing instructions
                          <span>01/01/2020</span>
                        </a>
                      </li><li>
                        <a href="/user/granicz/20191226-f-metablogging-introducing-blogengine-for-your-static-markdown-based-f-blog">
                          <img src="/assets/category4-thumb.jpg" alt="F# metablogging: introducing BlogEngine for your static markdown-based F# blog" />
                          F# metablogging: introducing BlogEngine for your static markdown-based F# blog
                          <span>12/26/2019</span>
                        </a>
                      </li><li>
                        <a href="/user/denuziere/20190924-bolero-0-9-released">
                          <img src="/assets/category5-thumb.jpg" alt="Bolero 0.9 released" />
                          Bolero 0.9 released
                          <span>09/24/2019</span>
                        </a>
                      </li><li>
                        <a href="/user/granicz/20190905-your-first-bolero-project-not-compiling-try-this">
                          <img src="/assets/category1-thumb.jpg" alt="Your first Bolero project not compiling? Try this!" />
                          Your first Bolero project not compiling? Try this!
                          <span>09/05/2019</span>
                        </a>
                      </li><li>
                        <a href="/user/denuziere/20190805-bolero-0-7-released">
                          <img src="/assets/category5-thumb.jpg" alt="Bolero 0.7 released" />
                          Bolero 0.7 released
                          <span>08/05/2019</span>
                        </a>
                      </li><li>
                        <a href="/user/denuziere/20190530-bolero-0-5-released-for-blazor-3-0-preview">
                          <img src="/assets/category5-thumb.jpg" alt="Bolero 0.5 released for Blazor 3.0-preview" />
                          Bolero 0.5 released for Blazor 3.0-preview
                          <span>05/30/2019</span>
                        </a>
                      </li>
                      
                    </ul>
                  </div>
                <hr class="space-sm" />
                <h3>Twitter</h3>
                <hr class="space-sm" />
                <div class="social-feed social-feed-tw social-slider" data-social-id="twitter" data-options="count:8,arrows:true,nav:true,controls:out,type:carousel,perView:1"></div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
  
  <i class="scroll-top-btn scroll-top show"></i>
  <footer class="footer light">
      
          <div class="container">
              <div class="row">
                  <div class="col-lg-2">
                      <h4>Company</h4>
                      <div class="menu-inner menu-inner-vertical">
                          <ul>
                              <li>
                                  <a href="/consulting">Consulting</a>
                              </li>
                              <li>
                                  <a href="/trainings">Trainings</a>
                              </li>
                              <li>
                                  <a href="/research">Research</a>
                              </li>
                              <li>
                                  <a href="/jobs">Jobs</a>
                              </li>
                              <li>
                                  <a href="/contact">Contact</a>
                              </li>
                          </ul>
                      </div>
                  </div>
                  <div class="col-lg-2">
                      <h4>Blogs</h4>
                      <div class="menu-inner menu-inner-vertical">
                          <ul>
                              <li>
                                  <a href="/blogs">Latest</a>
                              </li>
                              <li>
                                  <a href="/category/fsharp">F#</a>
                              </li>
                              <li>
                                  <a href="/category/websharper">WebSharper</a>
                              </li>
                              <li>
                                  <a href="/category/bolero">Bolero</a>
                              </li>
                              <li>
                                  <a href="/category/cloudsharper">CloudSharper</a>
                              </li>
                          </ul>
                      </div>
                  </div>
                  <div class="col-lg-4">
                      <h4>Legal</h4>
                      <div class="menu-inner menu-inner-vertical">
                          <ul>
                              <li>
                                  <a href="/terms-of-use">Terms of use</a>
                              </li>
                              <li>
                                  <a href="/privacy-policy">Privacy Policy</a>
                              </li>
                              <li>
                                  <a href="/cookie-policy">Cookie Policy</a>
                              </li>
                              <li>
                                  <a href="/QualityAndIntegratedSecurityPolicy.pdf">Integrated Quality and Information Security Policy</a>
                              </li>
                          </ul>
                      </div>
                  </div>
                  <div class="col-lg-4">
                      <h4>Newsletter signup</h4>
                      <p>We will not spam you or give your details to anyone.</p>
                      <form class="newsletter-form form-box form-ajax" method="post" data-email="example@domain.com">
                          <input style="width:200px" id="nemail" name="nemail" placeholder="Your email" type="email" class="input-text" required="" />
                          <button id="signUp" class="btn btn-sm btn-circle" type="submit">
                              <span>Sign Up</span>
                              <i class="fas fa-spinner fa-spin"></i>
                          </button>
                          <div class="success-box">
                              <div class="alert alert-success">Congratulations. You have signed up successfully!</div>
                          </div>
                          <div class="error-box">
                              <div class="alert alert-warning">Error, please retry. You were not signed up for the newsletter.</div>
                          </div>
                      </form>
                  </div>
              </div>
          </div>
          <div class="footer-bar">
              <div class="container">
                  <span>Made with</span>
                  <img width="24" height="20" style="vertical-align:top;" alt="Love" src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/42/Love_Heart_SVG.svg/32px-Love_Heart_SVG.svg.png" />
                  <span>in 100% F# with WebSharper. Copyright © IntelliFactory 2004-2020. Site design created by Schiocco Team.</span>
                  <span class="icon-links icon-social icon-links-grid social-colors">
                    <a class="facebook" href="https://www.facebook.com/intellifactory"><i class="fab fa-facebook"></i></a>
                    <a class="twitter" href="https://twitter.com/intellifactory"><i class="fab fa-twitter"></i></a>
                    <a class="linkedin" href="https://www.linkedin.com/company/intellifactory"><i class="fab fa-linkedin"></i></a>
                    <a class="youtube" href="https://www.youtube.com/results?search_query=intellifactory"><i class="fab fa-youtube"></i></a>
                    <a class="vimeo" href="https://vimeo.com/user15828007"><i class="fab fa-vimeo"></i></a>
                  </span>
              </div>
          </div>
      
      <div></div>
      <div id="cookie-banner"><p>This site uses cookies and other tracking technologies to assist with navigation and your ability to provide feedback, and analyse your use of our products and services.</p><a target="_blank" href="/cookie-policy">Read our Cookie Policy</a><div><button onclick="wscookies.accept()">Accept cookies</button><button onclick="wscookies.refuse()">Refuse cookies</button></div></div><script>
    var wscookies = {
        accepted: document.cookie.replace(/(?:(?:^|.*;\s*)cookie_accept\s*\=\s*([^;]*).*$)|^.*$/, "$1"),
        accept: function () {
        document.cookie = 'cookie_accept=true;max-age=31536000';
        this.set_banner('none');
        this.after_accept();
        },
        after_accept: function () { },
        refuse: function () {
        document.cookie = 'cookie_accept=false;max-age=31536000';
        this.set_banner('none');
        },
        set_banner: function (style) {
        document.getElementById('cookie-banner').style.display = style;
        }
    };
    switch (wscookies.accepted) {
        case '':
        wscookies.set_banner('flex');
        break;
        case 'true':
        wscookies.accept();
        break;
        default:
        wscookies.refuse();
    }
</script>
      <link rel="stylesheet" href="/themekit/media/icons/iconsmind/line-icons.min.css" />
      <link async="" rel="stylesheet" href="/themekit/media/icons/fontawesome/icon.css" />
      <script src="/themekit/scripts/parallax.min.js"></script>
      <script src="/themekit/scripts/imagesloaded.min.js"></script>
      <script src="/themekit/scripts/pagination.min.js"></script>
      <script src="/themekit/scripts/social.min.js"></script>
      <script src="/themekit/scripts/tab-accordion.js"></script>
      <script src="/media/custom.js"></script>
      <script src="/js/Client.js"></script>
      <meta id='websharper-data' name='websharper-data' content='{"$TYPES":[],"$DATA":{"$V":{}}}' />
<script src="../../Scripts/WebSharper.Core.JavaScript/Runtime.js" type="text/javascript" charset="UTF-8"></script><script type="text/javascript">
if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '../../Scripts/';
  IntelliFactory.Runtime.Start();
}
</script>

      <script src="//unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
      <script src="//unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
      <script>
          $(document).ready(function () {
              var $container = $('.masonry');
              $container.imagesLoaded(function () {
                  $container.masonry({
                      itemSelector: '.masonry-item',
                      percentPosition: true,
                      horizontalOrder: true
                  });
              });
          });
      </script>
  </footer>
</body>
</html>